<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <title>Graphe de relations</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://unpkg.com/cytoscape@3.26.0/dist/cytoscape.min.js"></script>
</head>

<body>
    <h1>Graphe de relations</h1>

    <button id="toggle-sidebar">≡ Menu</button>

    <div id="main-container">
        <div id="sidebar">
            <!-- Mode collaborateur : nom de l'auteur -->
            <div id="propose-author-section" class="form-section" style="display: none;">
                <h3>Proposer des modifications</h3>
                <p class="propose-hint">Vos ajouts seront soumis pour validation.</p>
                <input type="text" id="author-name" placeholder="Votre nom" required>
                <input type="text" id="author-email" placeholder="Votre email (optionnel)">
                <p id="proposal-stats" class="proposal-stats"></p>
            </div>

            <!-- Formulaire pour ajouter une personne -->
            <div class="form-section">
                <h3>Ajouter une personne</h3>
                <form id="form-person">
                    <p class="nom-consigne">Nom en majuscule OBLIGATOIRE, exemple : Jean HEUDE-LEGRANG</p>
                    <input type="text" id="nom" placeholder="Prénom NOM" required>
                    <p id="nom-similar-hint" class="nom-similar-hint" style="display: none;"></p>
                    <input type="text" id="origine" placeholder="Origine (optionnel)">
                    <input type="number" id="x" placeholder="Position X (auto si vide)">
                    <input type="number" id="y" placeholder="Position Y (auto si vide)">
                    <button type="submit">Ajouter</button>
                </form>
            </div>

            <!-- Formulaire pour ajouter une liste -->
            <div class="form-section">
                <h3>Ajouter une liste</h3>
                <form id="form-list">
                    <textarea id="list-noms" placeholder="Noms séparés par des virgules&#10;Ex: Jean, Marie, Paul"
                        rows="3" required></textarea>
                    <input type="text" id="list-origine" placeholder="Origine (optionnel)">
                    <button type="submit">Ajouter liste</button>
                    <small style="color: #666;">Les positions sont calculées automatiquement</small>
                </form>
            </div>

            <!-- Formulaire pour ajouter une relation -->
            <div class="form-section">
                <h3>Ajouter une relation</h3>
                <form id="form-relation">
                    <input type="text" id="source-nom" placeholder="Tapez puis choisir dans la liste" required autocomplete="off">
                    <div id="source-suggestions" class="name-suggestions" role="listbox"></div>
                    <input type="text" id="target-nom" placeholder="Tapez puis choisir dans la liste" required autocomplete="off">
                    <div id="target-suggestions" class="name-suggestions" role="listbox"></div>
                    <select id="type" required>
                        <option value="">-- Type de relation --</option>
                        <option value="FAMILLE">Famille</option>
                        <option value="AMIS">Amis</option>
                        <option value="AMOUR">Amour</option>
                    </select>
                    <button type="submit">Ajouter</button>
                </form>
            </div>

            <!-- Contrôles du graphe -->
            <div class="form-section">
                <h3>Contrôles</h3>
                <button id="zoom-in" class="action-btn">Zoom +</button>
                <button id="zoom-out" class="action-btn">Zoom -</button>
                <button id="fit" class="action-btn">Ajuster</button>
            </div>

            <!-- Boutons d'action -->
            <div class="form-section">
                <h3>Actions</h3>
                <button id="refresh" class="action-btn">Rafraîchir</button>
                <button id="delete-all" class="action-btn danger">Tout supprimer</button>
            </div>

            <!-- Propositions en attente (admin) -->
            <div id="proposals-admin-section" class="form-section" style="display: none;">
                <h3>Propositions en attente</h3>
                <button id="refresh-proposals" class="action-btn">Rafraîchir</button>
                <div id="proposals-list"></div>
            </div>

            <!-- Sauvegarde et restauration -->
            <div class="form-section">
                <h3>Sauvegarde</h3>
                <button id="export" class="action-btn">Exporter</button>
                <input type="file" id="import-file" accept=".json" style="display: none;">
                <button id="import" class="action-btn">Importer</button>
            </div>
        </div>

        <div id="cy"></div>
    </div>

    <script src="renderer.js"></script>
</body>

</html>